# 認証・ユーザー管理仕様書

## 1. ログイン機能

### 1.1 ログインフロー
1. ログイン画面表示
   - ニックネーム入力
   - パスワード入力
   - ログインボタン
   - パスワードリセットボタン

2. ロール判定
   - マスター：事前登録されたユーザーのみ
   - 講師：事前登録されたユーザーのみ

3. ユーザー情報の取得
   - ローカルストレージからユーザー情報取得
   - 新規ユーザーの場合自動作成

### 1.2 ユーザー情報
```typescript
interface User {
  uid: string;          // ユーザーID
  nickname: string;     // ニックネーム
  role: "master" | "teacher"; // ロール
  createdAt: Date;      // 作成日時
}
```

### 1.3 セキュリティ
- パスワードの最小長：6文字
- パスワードの有効期限：ずっと
- ログイン失敗回数制限：5回

## 2. マスター用ユーザー管理

### 2.1 ユーザー一覧
- ユーザーID
- ニックネーム
- ロール
- 作成日時
- 最終ログイン日時

### 2.2 ユーザー追加
1. ユーザー情報入力
   - ニックネーム
   - ロール選択
   - パスワード設定

2. 初期設定
   - ロールの自動設定
   - ユーザー情報の保存

### 2.3 ユーザー編集
- ニックネームの変更
- ロールの変更
- パスワードのリセット
  - マスターによるパスワードリセット
  - ユーザーの再登録が必要

### 2.4 ユーザー削除
1. 削除確認
   - データのバックアップ
   - シフトデータ
   - アクセスログ

2. 削除処理
   - ユーザー情報の削除
   - シフトデータの削除
   - アクセスログの保存

## 3. エラーハンドリング

### 3.1 ログインエラー
- ニックネームの形式エラー
- パスワードの形式エラー
- 認証エラー
- システムエラー

### 3.2 ユーザー管理エラー
- ユーザー重複エラー
- データ保存エラー
- アクセス権限エラー

## 4. 今後の拡張性

### 4.1 新機能
- ユーザーの詳細情報
- カスタムロールの設定
- バッチ処理機能

### 4.2 セキュリティ
- ログ監査機能
- セキュリティポリシーの更新
