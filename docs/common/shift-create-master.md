# マスター用シフト追加機能仕様書

## 1. 基本機能

### 1.1 シフト作成

- 講師用シフト作成システムの再利用
- ユーザー選択機能の追加
- ステータス制御の自動化

### 1.2 ユーザー選択

- スタッフ一覧の表示
- 検索機能
- ロールによるフィルタリング
- 選択されたユーザーの確認

### 1.3 ステータス制御

- 講師の場合：自動的に"pending"状態
- マスターの場合：
  - 自分自身：自動的に"approved"状態
  - 他のユーザー：選択可能（"pending"/"approved"）

## 2. フロー

### 2.1 シフト作成

1. ユーザー選択

   - スタッフ一覧から選択
   - 検索による絞り込み
   - ロールによるフィルタリング

2. シフト情報入力

   - 日付選択
   - 時間選択
   - 科目選択（オプション）
   - シフトタイプ選択（オプション）

3. ステータス設定

   - 講師：自動的に"pending"
   - マスター：
     - 自分自身：自動的に"approved"
     - 他のユーザー：選択可能

4. 保存処理
   - データバリデーション
   - Firebase への保存
   - ステータスの設定
   - タイムスタンプの記録

## 3. 権限制御

### 3.1 マスター権限

- すべてのユーザーのシフト作成
- ステータスの直接設定
- ユーザー選択機能

### 3.2 講師権限

- 自分自身のシフトのみ
- ステータス：自動的に"pending"
- ユーザー選択機能なし

## 4. UI/UX

### 4.1 マスター用 UI

- ユーザー選択セクション
- ステータス選択ドロップダウン
- 検索フィールド
- フィルタリングボタン

### 4.2 講師用 UI

- シフト作成フォームのみ
- ステータス選択なし
- ユーザー選択なし

## 5. エラーハンドリング

### 5.1 ユーザー選択

- 選択なしエラー
- 重複選択エラー
- 権限エラー

### 5.2 ステータス設定

- 不正なステータスエラー
- 権限エラー
- データ整合性エラー

## 6. 今後の拡張性

### 6.1 新機能

- バッチ処理
- テンプレート機能
- カレンダー連携

### 6.2 UI 改善

- モバイル最適化
- タッチ操作の最適化
- パフォーマンス改善
