# ログインフロー

## 現在の実装

### 1. ログイン画面

- 教師 ID とパスワードの入力
- ログインボタン
- ログイン成功時：自動的に適切な画面にリダイレクト
- ログイン失敗時：エラーメッセージの表示

### 2. 認証フロー

- Firebase Authentication を使用
- ユーザー情報は Firebase Firestore に保存
- ロール（master/teacher）による権限管理
- 新規ユーザー登録時は自動的にロールを決定

### 3. ログイン後のフロー

#### 講師の場合（理想フロー）

1. シフトカレンダービュー

   - カレンダーとシフトリストの両方を表示
   - シフトの詳細表示
   - シフトの追加機能

2. シフト管理
   - 自分のシフトの確認
   - シフトの追加・編集
   - シフトの削除

#### マスターの場合（理想フロー）

1. ガントチャートビュー

   - 全スタッフのシフトを一覧表示
   - 月単位のシフト管理
   - シフトの編集機能

2. スタッフ管理
   - スタッフの追加・削除
   - スタッフ情報の管理

## 理想のフロー

### 1. ログイン画面の改善

- ロール選択機能（マスター/講師）
- パスワードリセット機能
- 2 段階認証の導入
- ログイン履歴の表示

### 2. 認証フローの改善

- セッション管理の強化
- セキュリティログの記録
- アクセス権限の細かい制御

### 3. ログイン後のフロー改善

#### 講師の場合

1. ダッシュボード

   - 今後のシフト予定の要約
   - 申請中のシフト一覧
   - 重要なお知らせ

2. シフト管理
   - シフト申請機能
   - シフト変更履歴
   - シフトの共有機能

#### マスターの場合

1. マネージメントダッシュボード

   - スタッフの稼働状況
   - シフト申請の承認一覧
   - アクセスログ

2. シフト管理

   - シフト申請の承認
   - シフトの自動調整機能
   - スタッフの勤怠管理

3. スタッフ管理
   - スタッフの詳細情報管理
   - スタッフの評価機能
   - スタッフの連絡手段管理

## 今後の改善計画

### 短期

1. ログイン画面の UI 改善
2. セッション管理の強化
3. シフト申請機能の実装

### 中期

1. 2 段階認証の導入
2. シフト自動調整機能の実装
3. スタッフ評価機能の実装

### 長期

1. AI によるシフト最適化
2. モバイルアプリの改善
3. システム全体のパフォーマンス最適化
